"use strict";var app=getApp();Page({data:{balance:0,freeze:0,score:0,score_sign_continuous:0,userInfo:{}},onShareAppMessage:function(e){return"menu"===e.from?app.onShareAppMessage({path:"/pages/index/index",title:app.getCookie("syc_appName")||"衣否",imgUrl:"/images/logo.jpg"}):"button"===e.from?app.onShareAppMessage({path:"/pages/index/index?inviteCode="+this.data.userInfo.inviteCode,title:app.getCookie("syc_appName")||"衣否",imgUrl:"/images/logo.jpg"}):void 0},scanCode:function(){wx.scanCode({onlyFromCamera:!0,success:function(e){e.result.indexOf("/relay/openDoor")>-1&&app.wxRequest(e.result,{},function(e){1==e.code?(app.showToast("扫码开门成功"),app.redirect("/pages/user/center-access/index","redirectTo")):app.showToast(e.message||"扫码开门失败")})}})},getUserInfo:function(){var e=this;app.wxRequest("/user/userCenter",{},function(t){e.setData({userInfo:t.data})})},onShow:function(){this.getUserInfo(),this.updateUserStatus()},inviteFriends:function(){wx.showModal({content:"您的邀请码："+this.data.userInfo.inviteCode||"66666",showCancel:!1})},recharge:function(){app.redirect("/pages/user/recharge/index","navigateTo")},updateUserStatus:function(){"yes"==app.getCookie("syc_fitting")&&wx.showModal({title:"提 示",content:"当前检测到您还在试衣中，您还要'继续试衣'吗？",confirmText:"继续试衣",cancelText:"已完成",success:function(e){e.confirm?app.redirect("/pages/user/center-access/index","redirectTo"):app.updateUserStatus(2,function(e){e&&app.getCookie("syc_fitting","no")})}})}});